---
id: node_setup
title: Настройка узла HydraDX
---

import useBaseUrl from '@docusaurus/useBaseUrl';

В этом разделе вы познакомитесь с процессом настройки и запуска узла HydraDX.

:::warning

Для запуска узла валидатора требуется определенный набор технических навыков, необходимых для правильной настройки узла и обеспечения его работоспособности. Если вы не уверены в своих навыках в этой области, мы рекомендуем вам вместо установки собственного узла [назначить свой HDX(/start_nominating) опытному валидатору. Тем самым вы защищаете себя и своих номинантов от непреднамеренной потери средств.

:::

## 00 Требуемые технические характеристики {#00-required-technical-specifications}

Для работы узла валидатора HydraDX требуются как минимум следующие технические характеристики:

* ОС: Ubuntu 20.04
* Процессор: Intel Core i7-7700K (или имеющий аналогичные характеристики одного ядра)
* Память: 64 ГБ RAM
* Хранилище: твердотельный накопитель NVMe емкостью не менее 200 ГБ (объем данных со временем будет расти)

:::note

Это минимальные технические требования, проверенные командой. Хотите убедиться, что на вашем компьютере достаточно ресурсов для запуска узла? Чтобы узнать это, запустите [тест производительности](/performance_benchmark).
:::


## 01 Проверьте, синхронизированы ли ваши системные часы {#01-check-whether-your-system-clock-is-synchronized}

Перед запуском узла вы должны убедиться, что ваши системные часы синхронизированы - это важно, потому что валидаторы работают вместе. В Ubuntu 20.04 системные часы должны быть синхронизированы по умолчанию. Для проверки выполните следующую команду и проверьте вывод:

```bash
$ timedatectl | grep "System clock"
System clock synchronized: yes
```

Если результат отличается, вы можете установить NTP вручную и еще раз убедиться, что ваши системные часы синхронизированы:

```bash
$ apt install ntp
$ ntpq -p
```

## 02 Настройте параметры брандмауэра {#02-adjust-your-firewall-settings}
Порт `30333` используется для одноранговых соединений с другими узлами. Если вы запускаете узел в качестве валидатора, это единственный порт, который мы рекомендуем выставить в вашем брандмауэре.

Если вы *не* запускаете узел в качестве валидатора, вы также можете рассмотреть возможность открытия `9944` порта (для соединений RPC websocket с внешними приложениями) и `9933` порта (для HTTP-запросов к вашему узлу). Вы можете использовать порт `9944` для подключения к вашему узлу с помощью [Polkadot/apps](/polkadotjs_apps_local).

## 03 Загрузите или соберите бинарный файл {#03-download-or-build-a-binary}
Вы можете скачать бинарный файл с последними обновлениями с нашего [github](https://github.com/galacticcouncil/HydraDX-node/releases).

Кроме того, вы можете собрать бинарный файл из исходного кода:

```bash
# Установите зависимости
$ curl https://getsubstrate.io -sSf | bash -s -- --fast

# Получить исходный код последней стабильной версии
$ git clone https://github.com/galacticcouncil/HydraDX-node -b stable

# Соберите бинарный файл
$ cd HydraDX-node/
$ cargo build --release
```

Если вы создали бинарный файл, выполнив описанные выше шаги, путь к вашему файлу будет следующим:
```
target/release/hydra-dx
```

## 04 Запустите бинарный файл {#04-run-the-binary}
Вы можете запустить бинарный файл, выполнив следующую команду:

```bash
$ {PATH_TO_YOUR_BINARY} --chain lerna --name {YOUR_NODE_NAME} --validator
```

:::note

Узлам валидатора требуется база данных всей цепи. Если вы запускали узел раньше без флага `--validator`, вам нужно будет повторно синхронизировать базу данных, очистив цепочку перед запуском узла.
```bash
$ {PATH_TO_YOUR_BINARY} purge-chain --chain lerna
```

:::

Помимо пути к вашему бинарному файлу (см. выше), вам необходимо указать имя узла, которое будет использоваться для идентификации вашего узла в [Телеметрии](https://telemetry.hydradx.io/#/HydraDX%20Snakenet%20Gen2), где вы можете найти список всех узлов, работающих на HydraDX Snakenet.

## 05 Запуск с systemd {#05-running-with-systemd}
Чтобы убедиться, что ваш узел автоматически запускается при перезагрузке компьютера, мы рекомендуем запускать узел HydraDX как процесс systemd. Для этого создайте следующий файл и вставьте его содержимое, заменив переменные, обозначенные как `{VARIABLE}`:

```bash
$ touch /etc/systemd/system/hydradx-validator.service
```

```
[Unit]
Description=HydraDX validator

[Service]
Type=exec
User={UNIX_USER}
ExecStart={PATH_TO_YOUR_BINARY} --chain lerna --name {YOUR_NODE_NAME} --validator
Restart=always
RestartSec=120

[Install]
WantedBy=multi-user.target
```

:::note
Рекомендуется установить RestartSec, поскольку он задерживает перезапуск узла в случае сбоя. Это позволяет записывать на диск любые непостоянные данные (например, консенсусное голосование) до перезапуска узла. Перезапуск узла сразу после его сбоя может вызвать двусмысленность или двойное подписание, что в конечном итоге приведет к косой черте.
:::

После создания файла конфигурации вы можете взаимодействовать с узлом валидатора HydraDX как системным процессом:
```bash
# Запустить узел при загрузке системы
$ systemctl enable hydradx-validator.service

# Запустить узел вручную
$ systemctl start hydradx-validator.service

# Проверить статус узла
$ systemctl status hydradx-validator.service

# Проверить логи узла
$ journalctl -f -u hydradx-validator.service
```

Теперь ваш узел HydraDX настроен и работает!

Теперь вы можете выполнить последние шаги, чтобы [начать валидацию](/start_validating).
